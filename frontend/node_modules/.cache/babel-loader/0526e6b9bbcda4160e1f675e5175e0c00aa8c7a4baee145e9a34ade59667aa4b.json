{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/orlando-savings-engine/frontend/src/contexts/SearchContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useCallback } from 'react';\nimport { useSerpApi } from './SerpApiContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchContext = /*#__PURE__*/createContext(undefined);\nexport const SearchProvider = ({\n  children\n}) => {\n  _s();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filters, setFilters] = useState({\n    priceRange: [0, 1000],\n    rating: 0,\n    amenities: [],\n    propertyTypes: [],\n    sortBy: 'relevance'\n  });\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [hotels, setHotels] = useState([]);\n  const [deals, setDeals] = useState([]);\n  const [insights, setInsights] = useState([]);\n  const [combinedResults, setCombinedResults] = useState([]);\n\n  // Use SerpApi context\n  const {\n    searchOrlandoHotels,\n    searchTravelInsights,\n    searchOrlandoDeals,\n    combinedSearch,\n    hotels: serpApiHotels,\n    insights: serpApiInsights,\n    isLoadingHotels,\n    isLoadingInsights\n  } = useSerpApi();\n  const performSearch = useCallback(async (query, searchFilters) => {\n    setIsSearching(true);\n    try {\n      const finalQuery = query || searchQuery;\n      const finalFilters = {\n        ...filters,\n        ...searchFilters\n      };\n\n      // Perform combined search using SerpApi\n      const results = await combinedSearch({\n        hotel_query: finalQuery,\n        insights_query: finalQuery,\n        min_price: finalFilters.priceRange[0],\n        max_price: finalFilters.priceRange[1],\n        rating: finalFilters.rating || undefined\n      });\n      setHotels(results.hotels);\n      setInsights(results.insights);\n\n      // Combine and process results\n      const allResults = [...results.hotels.map(hotel => ({\n        ...hotel,\n        type: 'hotel',\n        source: 'serpapi'\n      })), ...results.insights.map(insight => ({\n        ...insight,\n        type: 'insight',\n        source: 'serpapi'\n      }))];\n      setCombinedResults(allResults);\n      setSearchResults(allResults);\n    } catch (error) {\n      console.error('Search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  }, [searchQuery, filters, combinedSearch]);\n  const searchHotels = useCallback(async (location, checkIn, checkOut, guests) => {\n    setIsSearching(true);\n    try {\n      const results = await searchOrlandoHotels({\n        q: `hotels in ${location}`,\n        checkInDate: checkIn,\n        checkOutDate: checkOut,\n        adults: guests\n      });\n      setHotels(results);\n      setSearchResults(results);\n    } catch (error) {\n      console.error('Hotel search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  }, [searchOrlandoHotels]);\n  const searchDeals = useCallback(async category => {\n    setIsSearching(true);\n    try {\n      let results;\n      if (category === 'orlando' || category === 'all') {\n        results = await searchOrlandoDeals();\n      } else {\n        results = await searchTravelInsights(`${category} deals Orlando`);\n      }\n      setDeals(results);\n      setInsights(results);\n      const dealResults = results.map(deal => ({\n        ...deal,\n        type: 'deal',\n        source: 'serpapi'\n      }));\n      setSearchResults(dealResults);\n    } catch (error) {\n      console.error('Deal search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  }, [searchOrlandoDeals, searchTravelInsights]);\n  const clearSearch = useCallback(() => {\n    setSearchQuery('');\n    setSearchResults([]);\n    setHotels([]);\n    setDeals([]);\n    setInsights([]);\n    setCombinedResults([]);\n    setFilters({\n      priceRange: [0, 1000],\n      rating: 0,\n      amenities: [],\n      propertyTypes: [],\n      sortBy: 'relevance'\n    });\n  }, []);\n  const value = {\n    searchQuery,\n    setSearchQuery,\n    filters,\n    setFilters,\n    searchResults,\n    setSearchResults,\n    isSearching: isSearching || isLoadingHotels || isLoadingInsights,\n    performSearch,\n    searchHotels,\n    searchDeals,\n    clearSearch,\n    hotels: hotels.length > 0 ? hotels : serpApiHotels,\n    deals,\n    insights: insights.length > 0 ? insights : serpApiInsights,\n    combinedResults\n  };\n  return /*#__PURE__*/_jsxDEV(SearchContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchProvider, \"LiDelw549unmAScxJYG25DLdCrc=\", false, function () {\n  return [useSerpApi];\n});\n_c = SearchProvider;\nexport const useSearch = () => {\n  _s2();\n  const context = useContext(SearchContext);\n  if (context === undefined) {\n    throw new Error('useSearch must be used within a SearchProvider');\n  }\n  return context;\n};\n_s2(useSearch, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"SearchProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useCallback","useSerpApi","jsxDEV","_jsxDEV","SearchContext","undefined","SearchProvider","children","_s","searchQuery","setSearchQuery","filters","setFilters","priceRange","rating","amenities","propertyTypes","sortBy","searchResults","setSearchResults","isSearching","setIsSearching","hotels","setHotels","deals","setDeals","insights","setInsights","combinedResults","setCombinedResults","searchOrlandoHotels","searchTravelInsights","searchOrlandoDeals","combinedSearch","serpApiHotels","serpApiInsights","isLoadingHotels","isLoadingInsights","performSearch","query","searchFilters","finalQuery","finalFilters","results","hotel_query","insights_query","min_price","max_price","allResults","map","hotel","type","source","insight","error","console","searchHotels","location","checkIn","checkOut","guests","q","checkInDate","checkOutDate","adults","searchDeals","category","dealResults","deal","clearSearch","value","length","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useSearch","_s2","context","Error","$RefreshReg$"],"sources":["/home/ubuntu/orlando-savings-engine/frontend/src/contexts/SearchContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useCallback } from 'react';\nimport { useSerpApi } from './SerpApiContext';\n\ninterface SearchFilters {\n  priceRange: [number, number];\n  rating: number;\n  amenities: string[];\n  propertyTypes: string[];\n  sortBy: string;\n}\n\ninterface SearchContextType {\n  // Search state\n  searchQuery: string;\n  setSearchQuery: React.Dispatch<React.SetStateAction<string>>;\n  filters: SearchFilters;\n  setFilters: React.Dispatch<React.SetStateAction<SearchFilters>>;\n  searchResults: any[];\n  setSearchResults: React.Dispatch<React.SetStateAction<any[]>>;\n  isSearching: boolean;\n  \n  // Search functions\n  performSearch: (query?: string, searchFilters?: Partial<SearchFilters>) => Promise<void>;\n  searchHotels: (location: string, checkIn: string, checkOut: string, guests: number) => Promise<void>;\n  searchDeals: (category: string) => Promise<void>;\n  clearSearch: () => void;\n  \n  // Results\n  hotels: any[];\n  deals: any[];\n  insights: any[];\n  combinedResults: any[];\n}\n\nconst SearchContext = createContext<SearchContextType | undefined>(undefined);\n\nexport const SearchProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filters, setFilters] = useState<SearchFilters>({\n    priceRange: [0, 1000],\n    rating: 0,\n    amenities: [],\n    propertyTypes: [],\n    sortBy: 'relevance'\n  });\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [hotels, setHotels] = useState<any[]>([]);\n  const [deals, setDeals] = useState<any[]>([]);\n  const [insights, setInsights] = useState<any[]>([]);\n  const [combinedResults, setCombinedResults] = useState<any[]>([]);\n\n  // Use SerpApi context\n  const {\n    searchOrlandoHotels,\n    searchTravelInsights,\n    searchOrlandoDeals,\n    combinedSearch,\n    hotels: serpApiHotels,\n    insights: serpApiInsights,\n    isLoadingHotels,\n    isLoadingInsights\n  } = useSerpApi();\n\n  const performSearch = useCallback(async (query?: string, searchFilters?: Partial<SearchFilters>) => {\n    setIsSearching(true);\n    try {\n      const finalQuery = query || searchQuery;\n      const finalFilters = { ...filters, ...searchFilters };\n      \n      // Perform combined search using SerpApi\n      const results = await combinedSearch({\n        hotel_query: finalQuery,\n        insights_query: finalQuery,\n        min_price: finalFilters.priceRange[0],\n        max_price: finalFilters.priceRange[1],\n        rating: finalFilters.rating || undefined\n      });\n\n      setHotels(results.hotels);\n      setInsights(results.insights);\n      \n      // Combine and process results\n      const allResults = [\n        ...results.hotels.map((hotel: any) => ({ ...hotel, type: 'hotel', source: 'serpapi' })),\n        ...results.insights.map((insight: any) => ({ ...insight, type: 'insight', source: 'serpapi' }))\n      ];\n      \n      setCombinedResults(allResults);\n      setSearchResults(allResults);\n    } catch (error) {\n      console.error('Search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  }, [searchQuery, filters, combinedSearch]);\n\n  const searchHotels = useCallback(async (location: string, checkIn: string, checkOut: string, guests: number) => {\n    setIsSearching(true);\n    try {\n      const results = await searchOrlandoHotels({\n        q: `hotels in ${location}`,\n        checkInDate: checkIn,\n        checkOutDate: checkOut,\n        adults: guests\n      });\n      \n      setHotels(results);\n      setSearchResults(results);\n    } catch (error) {\n      console.error('Hotel search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  }, [searchOrlandoHotels]);\n\n  const searchDeals = useCallback(async (category: string) => {\n    setIsSearching(true);\n    try {\n      let results;\n      \n      if (category === 'orlando' || category === 'all') {\n        results = await searchOrlandoDeals();\n      } else {\n        results = await searchTravelInsights(`${category} deals Orlando`);\n      }\n      \n      setDeals(results);\n      setInsights(results);\n      \n      const dealResults = results.map((deal: any) => ({ ...deal, type: 'deal', source: 'serpapi' }));\n      setSearchResults(dealResults);\n    } catch (error) {\n      console.error('Deal search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  }, [searchOrlandoDeals, searchTravelInsights]);\n\n  const clearSearch = useCallback(() => {\n    setSearchQuery('');\n    setSearchResults([]);\n    setHotels([]);\n    setDeals([]);\n    setInsights([]);\n    setCombinedResults([]);\n    setFilters({\n      priceRange: [0, 1000],\n      rating: 0,\n      amenities: [],\n      propertyTypes: [],\n      sortBy: 'relevance'\n    });\n  }, []);\n\n  const value = {\n    searchQuery,\n    setSearchQuery,\n    filters,\n    setFilters,\n    searchResults,\n    setSearchResults,\n    isSearching: isSearching || isLoadingHotels || isLoadingInsights,\n    performSearch,\n    searchHotels,\n    searchDeals,\n    clearSearch,\n    hotels: hotels.length > 0 ? hotels : serpApiHotels,\n    deals,\n    insights: insights.length > 0 ? insights : serpApiInsights,\n    combinedResults\n  };\n\n  return (\n    <SearchContext.Provider value={value}>\n      {children}\n    </SearchContext.Provider>\n  );\n};\n\nexport const useSearch = () => {\n  const context = useContext(SearchContext);\n  if (context === undefined) {\n    throw new Error('useSearch must be used within a SearchProvider');\n  }\n  return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}